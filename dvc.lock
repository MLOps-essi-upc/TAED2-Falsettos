schema: '2.0'
stages:
  prepare:
    cmd: python -m src.data.preprocess_dataset
    deps:
    - path: data/raw/
      md5: 281768d3515ed704b2d106ed7517217d.dir
      size: 3157509406
      nfiles: 15
    - path: src/data/preprocess_dataset.py
      md5: a9939ec1e0c2ffaca9920104801487ff
      size: 3570
    params:
      params.yaml:
        dataset:
          audio_length: 1
          total_labels: 36
          feature_extractor: facebook/hubert-base-ls960
    outs:
    - path: data/processed/
      md5: 71e19ba3eece3a035a491a870ffb331e.dir
      size: 6400265348
      nfiles: 21
    - path: gx/uncommitted/data_docs/
      md5: 3396c851c1c665dacf503a57c385157d.dir
      size: 4183911
      nfiles: 23
  train:
    cmd: python -m src.models.train_model
    deps:
    - path: data/processed/
      md5: 71e19ba3eece3a035a491a870ffb331e.dir
      size: 6400265348
      nfiles: 21
    - path: src/models/train_model.py
      md5: 8f64c02641f5d2a840597376bc35ccbc
      size: 8577
    params:
      params.yaml:
        model:
          algorithm_name: Hubert_Classifier
          random_state: 33
          num_classes: 36
          batch_size: 256
          lr: 0.0001
          momentum: 0.9
          optimizer: adam
          adapter_hidden_size: 128
          epochs: 2
          patience: 5
          log_interval: 15
    outs:
    - path: models/final_model/
      md5: 6f21897cfce68ab5e7057fe587e22f1b.dir
      size: 378782619
      nfiles: 2
  test:
    cmd: python -m src.models.test_model
    deps:
    - path: data/processed/
      md5: 71e19ba3eece3a035a491a870ffb331e.dir
      size: 6400265348
      nfiles: 21
    - path: models/final_model/
      md5: 6f21897cfce68ab5e7057fe587e22f1b.dir
      size: 378782619
      nfiles: 2
    - path: src/models/test_model.py
      md5: 881f5ad7257d33a4e2a263c4df6cd20d
      size: 4316
    params:
      params.yaml:
        model:
          algorithm_name: Hubert_Classifier
          random_state: 33
          num_classes: 36
          batch_size: 256
          lr: 0.0001
          momentum: 0.9
          optimizer: adam
          adapter_hidden_size: 128
          epochs: 2
          patience: 5
          log_interval: 15
